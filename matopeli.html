<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" type="text/css" href="/public/uistyle.css">
        <title>Matopeli</title>

    </head>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">
    var socket = io();
    var receivedData;
    socket.on("connect", function(){
        socket.on("chat message", function(msg) {
            console.log(msg);
            $('#messages').prepend($('<li>').text(socket + "->"+ msg));
        });
    });

    function sendMessage() {
        var message = document.getElementById('chatbox').value
        socket.emit("chat message", message);
    }

    var sentTime = 0;


    /*setInterval(function (){
        sentTime = Date.now();
        socket.emit("ping");
    },500);

    socket.on("pong",function(){
        var latency = (Date.now() - sentTime);
        console.log("Server sent pong!");
        console.log(latency.toString());
    });*/

</script>
    <body>
        <div id="header">
            <h3 id="htitle">Login</h3>
                Player: <input class="tbox" id="nick" type="text" name="player">
                <button onclick="login()">Login</button>
        </div>
        <script>
        function login(){
            // Otetaan nick talteen nick-kentästä
            var nickname = $("#nick").val();
            // Lähetetään serverille getissä käyttäjän ehdottama nickname
            $.get("/login?user="+nickname, function(data){
            });
        }
        </script>
        <div id="leftmenu">
            <h4 id="ltitle">Online players</h4>
            <p>Player 1</p>
        </div>
        <div id="rightmenu">
            <h4 id="rtitle">TOP-30</h4>
            <p>Player 1</p>
        </div>
        <div id="gameboard_div">

        </div>
        <div id="footer">
            <h4 id="ftitle">Messages</h4>
            <form id="chat">
                <div id="chat-area">
                <ul id="messages">

                </ul>
                </div>
                Send: <input id="chatbox" type="text" name="chatbox">
                <button type="button" onclick="sendMessage()">Send</button>
            </form>
        </div>

    </body>
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
        <script src="/public/worm.js"></script>
</html>